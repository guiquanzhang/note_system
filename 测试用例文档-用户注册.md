# 用户注册接口测试用例

## 接口信息
- **接口名称**: 用户注册
- **接口地址**: POST /api/user/register
- **是否需要认证**: 否

---

## 测试用例列表

### 用例1：正常注册 - 成功

**测试目的**: 验证正常情况下用户注册成功

**前置条件**: 
- 数据库连接正常
- 用户名未被注册

**测试数据**:
```json
{
  "username": "testuser001",
  "password": "123456",
  "email": "test001@example.com"
}
```

**执行步骤**:
1. 发送 POST 请求到 /api/user/register
2. 请求体包含上述测试数据

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"
- 数据库中成功插入用户记录
- 密码已加密存储

**Postman 测试**:
```
POST http://localhost:8080/api/user/register
Content-Type: application/json

{
  "username": "testuser001",
  "password": "123456",
  "email": "test001@example.com"
}
```

**cURL 测试**:
```bash
curl -X POST http://localhost:8080/api/user/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser001","password":"123456","email":"test001@example.com"}'
```

---

### 用例2：用户名为空 - 失败

**测试目的**: 验证用户名为空时注册失败

**测试数据**:
```json
{
  "username": "",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "用户名不能为空"

---

### 用例3：用户名过短 - 失败

**测试目的**: 验证用户名长度小于3个字符时注册失败

**测试数据**:
```json
{
  "username": "ab",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "用户名长度必须在3-20之间"

---

### 用例4：用户名过长 - 失败

**测试目的**: 验证用户名长度超过20个字符时注册失败

**测试数据**:
```json
{
  "username": "abcdefghijklmnopqrstu",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "用户名长度必须在3-20之间"

---

### 用例5：密码为空 - 失败

**测试目的**: 验证密码为空时注册失败

**测试数据**:
```json
{
  "username": "testuser",
  "password": "",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "密码不能为空"

---

### 用例6：密码过短 - 失败

**测试目的**: 验证密码长度小于6个字符时注册失败

**测试数据**:
```json
{
  "username": "testuser",
  "password": "12345",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "密码长度必须在6-20之间"

---

### 用例7：密码过长 - 失败

**测试目的**: 验证密码长度超过20个字符时注册失败

**测试数据**:
```json
{
  "username": "testuser",
  "password": "123456789012345678901",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "密码长度必须在6-20之间"

---

### 用例8：邮箱格式错误 - 失败

**测试目的**: 验证邮箱格式不正确时注册失败

**测试数据**:
```json
{
  "username": "testuser",
  "password": "123456",
  "email": "invalid-email"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: "邮箱格式不正确"

---

### 用例9：邮箱为空（可选字段） - 成功

**测试目的**: 验证邮箱为空时可以注册成功（邮箱是可选字段）

**测试数据**:
```json
{
  "username": "testuser002",
  "password": "123456"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例10：用户名已存在 - 失败

**测试目的**: 验证用户名重复时注册失败

**前置条件**: 
- 数据库中已存在用户名为 "duplicateuser" 的用户

**测试数据**:
```json
{
  "username": "duplicateuser",
  "password": "123456",
  "email": "test@example.com"
}
```

**执行步骤**:
1. 第一次注册用户 "duplicateuser"（应该成功）
2. 第二次注册相同用户名（应该失败）

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 500
- 响应 message: "用户名已存在"

---

### 用例11：特殊字符用户名 - 成功

**测试目的**: 验证用户名包含下划线、中划线、数字时可以注册成功

**测试数据**:
```json
{
  "username": "test_user-123",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例12：中文用户名 - 成功

**测试目的**: 验证用户名包含中文时可以注册成功

**测试数据**:
```json
{
  "username": "测试用户",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例13：边界值测试 - 用户名3个字符 - 成功

**测试目的**: 验证用户名最小长度边界值

**测试数据**:
```json
{
  "username": "abc",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例14：边界值测试 - 用户名20个字符 - 成功

**测试目的**: 验证用户名最大长度边界值

**测试数据**:
```json
{
  "username": "abcdefghijklmnopqrst",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例15：边界值测试 - 密码6个字符 - 成功

**测试目的**: 验证密码最小长度边界值

**测试数据**:
```json
{
  "username": "testuser",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例16：边界值测试 - 密码20个字符 - 成功

**测试目的**: 验证密码最大长度边界值

**测试数据**:
```json
{
  "username": "testuser",
  "password": "12345678901234567890",
  "email": "test@example.com"
}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 200
- 响应 message: "操作成功"

---

### 用例17：SQL注入测试 - 失败

**测试目的**: 验证系统防止SQL注入攻击

**测试数据**:
```json
{
  "username": "admin' OR '1'='1",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- 系统正常处理，不会执行SQL注入
- 可能注册成功（用户名被当作普通字符串）或失败（用户名包含非法字符）

---

### 用例18：XSS攻击测试 - 成功

**测试目的**: 验证系统防止XSS攻击

**测试数据**:
```json
{
  "username": "<script>alert('xss')</script>",
  "password": "123456",
  "email": "test@example.com"
}
```

**预期结果**:
- 系统正常处理，脚本被转义或过滤
- 注册成功，但脚本不会被执行

---

### 用例19：并发注册测试

**测试目的**: 验证多个用户同时注册相同用户名时的处理

**执行步骤**:
1. 同时发送10个注册请求，用户名都是 "concurrentuser"
2. 观察结果

**预期结果**:
- 只有1个请求成功
- 其他9个请求失败，提示"用户名已存在"

---

### 用例20：请求体为空 - 失败

**测试目的**: 验证请求体为空时的处理

**测试数据**:
```json
{}
```

**预期结果**:
- HTTP 状态码: 200
- 响应 code: 400
- 响应 message: 参数校验失败

---

## 测试数据汇总表

| 用例编号 | 用户名 | 密码 | 邮箱 | 预期结果 |
|---------|--------|------|------|---------|
| 1 | testuser001 | 123456 | test001@example.com | 成功 |
| 2 | (空) | 123456 | test@example.com | 失败 |
| 3 | ab | 123456 | test@example.com | 失败 |
| 4 | (21个字符) | 123456 | test@example.com | 失败 |
| 5 | testuser | (空) | test@example.com | 失败 |
| 6 | testuser | 12345 | test@example.com | 失败 |
| 7 | testuser | 123456 | invalid-email | 失败 |
| 8 | testuser002 | 123456 | (空) | 成功 |
| 9 | duplicateuser | 123456 | test@example.com | 失败 |
| 10 | test_user-123 | 123456 | test@example.com | 成功 |

---

## 执行测试

### 方式1：使用 JUnit 单元测试
```bash
mvn test -Dtest=UserControllerTest
```

### 方式2：使用 Postman
1. 导入上述测试用例到 Postman
2. 创建测试集合
3. 逐个执行测试用例

### 方式3：使用 JMeter 进行压力测试
1. 创建线程组
2. 添加 HTTP 请求
3. 设置并发用户数
4. 执行测试

---

## 测试报告模板

| 用例编号 | 测试结果 | 实际响应码 | 实际消息 | 备注 |
|---------|---------|-----------|---------|------|
| 1 | ✅ 通过 | 200 | 操作成功 | - |
| 2 | ✅ 通过 | 400 | 用户名不能为空 | - |
| 3 | ✅ 通过 | 400 | 用户名长度必须在3-20之间 | - |
| ... | ... | ... | ... | ... |

---

**测试人员**: ___________  
**测试日期**: ___________  
**测试环境**: ___________  
**测试版本**: v1.0.0
