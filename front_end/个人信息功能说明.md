# 👤 个人信息功能说明

## 功能概览

个人信息页面提供以下功能：
1. ✅ 查看用户基本信息
2. ✅ 修改用户名
3. ✅ 修改邮箱
4. ✅ 修改密码
5. ✅ 账户安全提示

---

## 访问方式

### 方法 1：通过导航栏
1. 登录后，点击右上角用户头像
2. 在下拉菜单中选择"个人信息"

### 方法 2：直接访问
访问 `http://localhost:5173/profile`

---

## 功能详解

### 1. 基本信息标签页

#### 显示内容
- **用户ID**: 只读，系统自动生成
- **用户名**: 可编辑，3-20 个字符
- **邮箱**: 可编辑，需符合邮箱格式
- **注册时间**: 只读，显示账户创建时间
- **更新时间**: 只读，显示最后更新时间

#### 操作流程
```
1. 点击"编辑信息"按钮
2. 修改用户名或邮箱
3. 点击"保存"按钮
4. 系统验证并保存
5. 显示成功提示
```

#### 验证规则
- **用户名**: 
  - 必填
  - 长度 3-20 个字符
  - 不能与其他用户重复
- **邮箱**: 
  - 可选
  - 必须符合邮箱格式（xxx@xxx.xxx）

---

### 2. 修改密码标签页

#### 表单字段
- **旧密码**: 必填，用于验证身份
- **新密码**: 必填，6-20 个字符
- **确认密码**: 必填，必须与新密码一致

#### 操作流程
```
1. 输入旧密码
2. 输入新密码
3. 再次输入新密码确认
4. 点击"修改密码"按钮
5. 系统验证并保存
6. 显示成功提示
7. 3 秒后自动跳转到登录页
```

#### 验证规则
- **旧密码**: 
  - 必填
  - 必须与数据库中的密码匹配
- **新密码**: 
  - 必填
  - 长度 6-20 个字符
- **确认密码**: 
  - 必填
  - 必须与新密码完全一致

#### 安全提示
- 修改密码后需要重新登录
- 系统会自动清除登录状态
- 3 秒后跳转到登录页

---

### 3. 账户安全标签页

#### 安全提示
- 定期修改密码，建议每 3 个月更换一次
- 密码长度至少 6 位，建议包含字母、数字和特殊字符
- 不要在多个网站使用相同的密码
- 绑定邮箱可以帮助您找回密码

#### 快捷操作
- **登录密码**: 点击"修改密码"跳转到修改密码标签页
- **绑定邮箱**: 点击"绑定邮箱"或"修改邮箱"跳转到基本信息标签页

---

## API 接口

### 1. 获取用户信息
```
GET /api/user/info
```

**响应示例**:
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "userId": 1,
    "username": "testuser",
    "email": "test@example.com",
    "createdAt": "2024-12-14T10:00:00",
    "updatedAt": "2024-12-14T10:00:00"
  }
}
```

### 2. 更新用户信息
```
PUT /api/user/info
```

**请求参数**:
```json
{
  "username": "newusername",
  "email": "newemail@example.com"
}
```

### 3. 修改密码
```
PUT /api/user/password
```

**请求参数**:
```json
{
  "oldPassword": "123456",
  "newPassword": "654321",
  "confirmPassword": "654321"
}
```

---

## 错误处理

### 常见错误

#### 1. 用户名已存在
```
错误信息: "用户名已存在"
解决方案: 更换一个未被使用的用户名
```

#### 2. 邮箱格式不正确
```
错误信息: "请输入正确的邮箱地址"
解决方案: 检查邮箱格式，确保包含 @ 和域名
```

#### 3. 旧密码错误
```
错误信息: "旧密码错误"
解决方案: 确认输入的旧密码是否正确
```

#### 4. 两次密码不一致
```
错误信息: "两次输入的密码不一致"
解决方案: 确保新密码和确认密码完全一致
```

---

## 测试步骤

### 测试 1: 修改用户名
```
1. 登录系统
2. 访问个人信息页面
3. 点击"编辑信息"
4. 修改用户名为 "testuser2"
5. 点击"保存"
6. 验证: 显示"信息更新成功"
7. 验证: 用户名已更新
```

### 测试 2: 修改邮箱
```
1. 访问个人信息页面
2. 点击"编辑信息"
3. 修改邮箱为 "test2@example.com"
4. 点击"保存"
5. 验证: 显示"信息更新成功"
6. 验证: 邮箱已更新
```

### 测试 3: 修改密码
```
1. 访问个人信息页面
2. 切换到"修改密码"标签页
3. 输入旧密码: "123456"
4. 输入新密码: "654321"
5. 输入确认密码: "654321"
6. 点击"修改密码"
7. 验证: 显示"密码修改成功，请重新登录"
8. 验证: 3 秒后跳转到登录页
9. 使用新密码登录
10. 验证: 登录成功
```

### 测试 4: 表单验证
```
1. 访问个人信息页面
2. 点击"编辑信息"
3. 清空用户名
4. 点击"保存"
5. 验证: 显示"请输入用户名"
6. 输入 2 个字符的用户名
7. 点击"保存"
8. 验证: 显示"用户名长度在 3 到 20 个字符"
```

---

## 响应式设计

### 桌面端 (> 768px)
- 表单最大宽度 500px
- 标签页正常显示

### 移动端 (≤ 768px)
- 表单占满宽度
- 安全项目上下堆叠
- 内边距减小

---

## 注意事项

### 1. 安全性
- ✅ 修改密码需要验证旧密码
- ✅ 密码使用 BCrypt 加密存储
- ✅ 修改密码后强制重新登录

### 2. 用户体验
- ✅ 表单验证实时反馈
- ✅ 操作成功有明确提示
- ✅ 编辑状态可以取消
- ✅ 密码输入支持显示/隐藏

### 3. 数据一致性
- ✅ 保存后自动刷新用户信息
- ✅ 取消编辑恢复原始数据
- ✅ 表单验证防止无效数据

---

## 后续优化建议

### 可选功能
- [ ] 上传头像功能
- [ ] 邮箱验证功能
- [ ] 手机号绑定
- [ ] 第三方账号绑定
- [ ] 登录日志查看
- [ ] 设备管理
- [ ] 注销账户功能

---

## 总结

个人信息功能已完整实现，包括：
- ✅ 查看和编辑基本信息
- ✅ 修改密码
- ✅ 账户安全提示
- ✅ 完整的表单验证
- ✅ 友好的用户交互
- ✅ 响应式设计

**现在可以开始测试了！** 🎉
