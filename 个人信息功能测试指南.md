# 🧪 个人信息功能测试指南

## ✅ 当前状态

### 后端状态
- ✅ 后端服务运行中 (端口 8080)
- ✅ UserContext 类已创建
- ✅ JwtInterceptor 已更新（设置/清除用户上下文）
- ✅ UserController 新增 3 个接口
- ✅ UserService 新增 3 个方法
- ✅ 所有 DTO 和 VO 已创建
- ✅ 代码编译无错误

### 前端状态
- ✅ 前端服务运行中 (端口 5173)
- ✅ Profile.vue 页面已创建
- ✅ 路由配置已完成
- ✅ API 接口已配置
- ✅ MainLayout 导航已更新

---

## 📋 测试步骤

### 测试 1: 访问个人信息页面

#### 步骤
1. 打开浏览器访问 `http://localhost:5173`
2. 如果未登录，会跳转到登录页面
3. 使用测试账号登录：
   - 用户名: `testuser`
   - 密码: `123456`
4. 登录成功后，点击右上角用户头像
5. 在下拉菜单中点击"个人信息"

#### 预期结果
- ✅ 成功跳转到 `/profile` 页面
- ✅ 显示三个标签页：基本信息、修改密码、账户安全
- ✅ 基本信息标签页显示用户数据（用户ID、用户名、邮箱、注册时间、更新时间）

---

### 测试 2: 修改用户名

#### 步骤
1. 在"基本信息"标签页，点击"编辑信息"按钮
2. 修改用户名为 `testuser2`
3. 点击"保存"按钮

#### 预期结果
- ✅ 显示成功提示："信息更新成功"
- ✅ 用户名字段更新为 `testuser2`
- ✅ 编辑状态自动关闭
- ✅ 右上角显示的用户名也更新为 `testuser2`

#### 验证
- 刷新页面，用户名仍然是 `testuser2`

---

### 测试 3: 修改邮箱

#### 步骤
1. 点击"编辑信息"按钮
2. 修改邮箱为 `newemail@example.com`
3. 点击"保存"按钮

#### 预期结果
- ✅ 显示成功提示："信息更新成功"
- ✅ 邮箱字段更新为 `newemail@example.com`

---

### 测试 4: 表单验证 - 用户名

#### 步骤
1. 点击"编辑信息"按钮
2. 清空用户名
3. 点击"保存"按钮

#### 预期结果
- ✅ 显示错误提示："请输入用户名"
- ✅ 不会提交表单

#### 步骤 2
1. 输入 2 个字符的用户名（如 `ab`）
2. 点击"保存"按钮

#### 预期结果
- ✅ 显示错误提示："用户名长度在 3 到 20 个字符"

---

### 测试 5: 表单验证 - 邮箱格式

#### 步骤
1. 点击"编辑信息"按钮
2. 输入无效邮箱（如 `invalid-email`）
3. 点击"保存"按钮

#### 预期结果
- ✅ 显示错误提示："请输入正确的邮箱地址"

---

### 测试 6: 取消编辑

#### 步骤
1. 点击"编辑信息"按钮
2. 修改用户名和邮箱
3. 点击"取消"按钮

#### 预期结果
- ✅ 用户名和邮箱恢复到原始值
- ✅ 编辑状态关闭
- ✅ 表单验证错误清除

---

### 测试 7: 修改密码 - 成功场景

#### 步骤
1. 切换到"修改密码"标签页
2. 输入旧密码: `123456`
3. 输入新密码: `654321`
4. 输入确认密码: `654321`
5. 点击"修改密码"按钮

#### 预期结果
- ✅ 显示成功提示："密码修改成功，请重新登录"
- ✅ 3 秒后自动跳转到登录页面
- ✅ 本地存储被清除

#### 验证
1. 使用旧密码 `123456` 登录
   - ❌ 应该失败，显示"用户名或密码错误"
2. 使用新密码 `654321` 登录
   - ✅ 应该成功

---

### 测试 8: 修改密码 - 旧密码错误

#### 步骤
1. 切换到"修改密码"标签页
2. 输入错误的旧密码: `wrongpassword`
3. 输入新密码: `newpass123`
4. 输入确认密码: `newpass123`
5. 点击"修改密码"按钮

#### 预期结果
- ✅ 显示错误提示："旧密码错误"
- ✅ 密码不会被修改

---

### 测试 9: 修改密码 - 两次密码不一致

#### 步骤
1. 切换到"修改密码"标签页
2. 输入旧密码: `654321`
3. 输入新密码: `newpass123`
4. 输入确认密码: `differentpass`
5. 点击"修改密码"按钮

#### 预期结果
- ✅ 显示错误提示："两次输入的密码不一致"
- ✅ 不会提交表单

---

### 测试 10: 修改密码 - 密码长度验证

#### 步骤
1. 切换到"修改密码"标签页
2. 输入旧密码: `654321`
3. 输入新密码: `123`（少于 6 位）
4. 输入确认密码: `123`
5. 点击"修改密码"按钮

#### 预期结果
- ✅ 显示错误提示："密码长度在 6 到 20 个字符"

---

### 测试 11: 重置密码表单

#### 步骤
1. 切换到"修改密码"标签页
2. 输入旧密码、新密码、确认密码
3. 点击"重置"按钮

#### 预期结果
- ✅ 所有密码字段被清空
- ✅ 表单验证错误清除

---

### 测试 12: 账户安全标签页

#### 步骤
1. 切换到"账户安全"标签页

#### 预期结果
- ✅ 显示安全提示信息
- ✅ 显示"登录密码"项，点击"修改密码"跳转到修改密码标签页
- ✅ 显示"绑定邮箱"项，显示当前邮箱或"未绑定邮箱"
- ✅ 点击"修改邮箱"或"绑定邮箱"跳转到基本信息标签页

---

### 测试 13: 响应式设计

#### 桌面端测试 (> 768px)
1. 使用正常浏览器窗口访问个人信息页面

#### 预期结果
- ✅ 表单最大宽度 500px
- ✅ 布局正常显示

#### 移动端测试 (≤ 768px)
1. 按 F12 打开开发者工具
2. 切换到移动设备模拟模式
3. 选择 iPhone 或其他移动设备

#### 预期结果
- ✅ 表单占满宽度
- ✅ 安全项目上下堆叠
- ✅ 内边距适配移动端

---

### 测试 14: 用户名重复检查

#### 准备工作
1. 注册一个新用户 `testuser3`

#### 步骤
1. 使用 `testuser2` 登录
2. 访问个人信息页面
3. 点击"编辑信息"
4. 修改用户名为 `testuser3`（已存在的用户名）
5. 点击"保存"

#### 预期结果
- ✅ 显示错误提示："用户名已存在"
- ✅ 用户名不会被修改

---

## 🔍 调试技巧

### 查看浏览器控制台
1. 按 F12 打开开发者工具
2. 切换到 Console 标签
3. 查看是否有错误信息

### 查看网络请求
1. 按 F12 打开开发者工具
2. 切换到 Network 标签
3. 执行操作
4. 查看 API 请求和响应

### 常见问题

#### 问题 1: 404 错误
**原因**: 后端接口未注册
**解决**: 
1. 检查后端控制台是否有接口映射日志
2. 重启后端服务

#### 问题 2: 401 错误
**原因**: Token 无效或过期
**解决**: 
1. 清除浏览器缓存：`localStorage.clear()`
2. 重新登录

#### 问题 3: 500 错误
**原因**: 后端代码异常
**解决**: 
1. 查看后端控制台错误信息
2. 检查数据库连接

#### 问题 4: 页面空白
**原因**: 前端代码错误
**解决**: 
1. 查看浏览器控制台错误
2. 检查 Vue 组件是否正确加载

---

## 📊 测试检查清单

### 基本信息功能
- [ ] 查看用户信息
- [ ] 编辑用户名
- [ ] 编辑邮箱
- [ ] 取消编辑
- [ ] 用户名验证（必填、长度）
- [ ] 邮箱验证（格式）
- [ ] 用户名重复检查

### 修改密码功能
- [ ] 修改密码成功
- [ ] 旧密码错误提示
- [ ] 两次密码不一致提示
- [ ] 密码长度验证
- [ ] 重置表单
- [ ] 修改后自动跳转登录

### 账户安全功能
- [ ] 显示安全提示
- [ ] 快捷跳转到修改密码
- [ ] 快捷跳转到修改邮箱

### 用户体验
- [ ] 加载状态显示
- [ ] 成功提示显示
- [ ] 错误提示显示
- [ ] 响应式设计（桌面端）
- [ ] 响应式设计（移动端）

---

## 🎯 下一步

完成所有测试后，可以考虑以下优化：

### 可选功能
- [ ] 上传头像功能
- [ ] 邮箱验证功能
- [ ] 手机号绑定
- [ ] 第三方账号绑定
- [ ] 登录日志查看
- [ ] 设备管理
- [ ] 注销账户功能

### 性能优化
- [ ] 添加防抖处理（表单提交）
- [ ] 添加加载骨架屏
- [ ] 优化图片加载

### 安全增强
- [ ] 添加图形验证码
- [ ] 添加短信验证
- [ ] 添加登录日志
- [ ] 添加异常登录提醒

---

## 📝 测试记录

### 测试环境
- 后端地址: `http://localhost:8080`
- 前端地址: `http://localhost:5173`
- 测试账号: `testuser` / `123456`
- 测试时间: 2024-12-14

### 测试结果
请在测试时记录结果：

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 访问个人信息页面 | ⬜ |  |
| 修改用户名 | ⬜ |  |
| 修改邮箱 | ⬜ |  |
| 用户名验证 | ⬜ |  |
| 邮箱验证 | ⬜ |  |
| 取消编辑 | ⬜ |  |
| 修改密码成功 | ⬜ |  |
| 旧密码错误 | ⬜ |  |
| 密码不一致 | ⬜ |  |
| 密码长度验证 | ⬜ |  |
| 重置密码表单 | ⬜ |  |
| 账户安全页面 | ⬜ |  |
| 响应式设计 | ⬜ |  |
| 用户名重复检查 | ⬜ |  |

---

## ✨ 总结

个人信息功能已完整实现，包括：
- ✅ 完整的后端 API（获取信息、更新信息、修改密码）
- ✅ 完整的前端页面（三个标签页）
- ✅ 完整的表单验证
- ✅ 友好的用户交互
- ✅ 响应式设计
- ✅ 安全的密码处理

**现在可以开始测试了！** 🚀

如果遇到任何问题，请查看"调试技巧"部分或联系开发人员。
