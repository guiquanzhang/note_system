import{b as I,r as V,p as P,e as j}from"./note-CSOVseSf.js";import{y as f,N as F,c as d,o as l,a,k as x,Y as T,t as u,b as s,w as n,r as _,F as H,e as L,K as g,d as p,f as m,T as C,aa as U,ab as $,S as A,W as k,a0 as K}from"./index-CxuP8R5R.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-CqNpOxbT.js";const W={class:"trash-page"},q={class:"page-header"},G={class:"header-left"},J={class:"note-count"},O={class:"header-right"},Q={key:1,class:"note-list"},X={class:"note-header"},Z={class:"note-title"},ee={class:"note-actions"},te={class:"note-content"},ae={class:"note-preview"},se={class:"note-footer"},oe={class:"note-meta"},ne={class:"meta-item"},le={key:0,class:"meta-item"},re={key:2,class:"pagination"},ce={__name:"Trash",setup(ie){const w=f([]),r=f(0),v=f(1),h=f(10),c=async()=>{try{const t=await I({pageNum:v.value,pageSize:h.value});w.value=t.records||[],r.value=t.total||0}catch{g.error("加载失败")}},B=async t=>{try{await k.confirm("确定要恢复这条笔记吗？","恢复笔记",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await V(t),g.success("恢复成功"),c()}catch(e){e!=="cancel"&&console.error("恢复失败:",e)}},N=async t=>{try{await k.confirm("永久删除后无法恢复，确定要删除吗？","永久删除",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"error"}),await P(t),g.success("删除成功"),c()}catch(e){e!=="cancel"&&console.error("删除失败:",e)}},z=async()=>{try{await k.confirm("清空回收站后，所有笔记将被永久删除且无法恢复，确定要继续吗？","清空回收站",{confirmButtonText:"确定清空",cancelButtonText:"取消",type:"error"}),await j(),g.success("回收站已清空"),c()}catch(t){t!=="cancel"&&console.error("清空失败:",t)}},b=t=>t?t.length>100?t.substring(0,100)+"...":t:"无内容",D=t=>t?K(t).format("YYYY-MM-DD HH:mm:ss"):"-";return F(()=>{c()}),(t,e)=>{const i=_("el-icon"),y=_("el-button"),S=_("el-alert"),M=_("el-card"),Y=_("el-pagination");return l(),d("div",W,[a("div",q,[a("div",G,[e[2]||(e[2]=a("h2",null,"回收站",-1)),a("span",J,"共 "+u(r.value)+" 条笔记",1)]),a("div",O,[s(y,{type:"danger",disabled:r.value===0,onClick:z},{default:n(()=>[s(i,null,{default:n(()=>[s(m(C))]),_:1}),e[3]||(e[3]=p(" 清空回收站 ",-1))]),_:1},8,["disabled"])])]),r.value===0?(l(),x(S,{key:0,title:"回收站为空",type:"info",closable:!1,"show-icon":"",class:"empty-alert"},{default:n(()=>[...e[4]||(e[4]=[a("p",null,"回收站中的笔记会在 30 天后自动永久删除",-1)])]),_:1})):(l(),d("div",Q,[(l(!0),d(H,null,L(w.value,o=>(l(),x(M,{key:o.noteId,class:"note-card",shadow:"hover"},{default:n(()=>[a("div",X,[a("h3",Z,u(o.title||"无标题"),1),a("div",ee,[s(y,{type:"primary",size:"small",onClick:E=>B(o.noteId)},{default:n(()=>[s(i,null,{default:n(()=>[s(m(U))]),_:1}),e[5]||(e[5]=p(" 恢复 ",-1))]),_:1},8,["onClick"]),s(y,{type:"danger",size:"small",onClick:E=>N(o.noteId)},{default:n(()=>[s(i,null,{default:n(()=>[s(m(C))]),_:1}),e[6]||(e[6]=p(" 永久删除 ",-1))]),_:1},8,["onClick"])])]),a("div",te,[a("p",ae,u(b(o.content)),1)]),a("div",se,[a("div",oe,[a("span",ne,[s(i,null,{default:n(()=>[s(m($))]),_:1}),p(" 删除时间："+u(D(o.deletedAt)),1)]),o.tags?(l(),d("span",le,[s(i,null,{default:n(()=>[s(m(A))]),_:1}),p(" "+u(o.tags),1)])):T("",!0)])])]),_:2},1024))),128))])),r.value>0?(l(),d("div",re,[s(Y,{"current-page":v.value,"onUpdate:currentPage":e[0]||(e[0]=o=>v.value=o),"page-size":h.value,"onUpdate:pageSize":e[1]||(e[1]=o=>h.value=o),total:r.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"])])):T("",!0)])}}},me=R(ce,[["__scopeId","data-v-7eafcdca"]]);export{me as default};
