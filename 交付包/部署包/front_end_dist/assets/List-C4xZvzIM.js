import{y as N,M as O,N as Q,c as u,o as n,a as i,X as ee,Y as y,b as s,w as a,r as d,f as l,U as te,A as oe,s as B,Z as ae,k as h,F as I,e as M,u as se,d as c,t as p,_ as ne,h as le,T as ie,$ as re,a0 as de,W as ce}from"./index-CxuP8R5R.js";import"./index-DbT8dq-d.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as pe}from"./note-ChPUqnyG.js";import{u as _e}from"./category-CzVHQ6Cc.js";import"./request-CqNpOxbT.js";import"./note-CSOVseSf.js";const me={class:"note-list-page"},fe={class:"page-header fade-in-up"},ge={key:0,class:"filter-tag"},ve={class:"search-bar fade-in-up-delay-1"},ye={class:"note-list fade-in-up-delay-2"},he={key:1,class:"note-grid"},Ce={class:"note-card-header"},ke={class:"note-title"},Ne={class:"note-content"},we={class:"note-footer"},xe={class:"footer-left"},ze={key:1,class:"note-tags"},Se={class:"note-time"},Te={key:0,class:"pagination"},be={__name:"List",setup(Be){const C=se(),V=O(),r=pe(),D=_e(),_=N(""),w=N(V.query.tag||""),m=N(1),f=N(10);Q(()=>{g()});const g=()=>{r.fetchNoteList(m.value,f.value)},S=()=>{_.value.trim()?r.searchNotes(_.value,m.value,f.value):g()},L=()=>{_.value="",r.clearSearch()},$=t=>{f.value=t,g()},Y=t=>{m.value=t,g()},T=()=>{C.push("/notes/create")},H=t=>{C.push(`/notes/${t}`)},U=(t,e)=>{t==="edit"?C.push(`/notes/${e.noteId}/edit`):t==="delete"&&A(e)},A=t=>{ce.confirm(`确定要删除笔记"${t.title}"吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.deleteNote(t.noteId)}).catch(()=>{})},E=t=>D.getCategoryName(t),F=t=>de(t).format("YYYY-MM-DD HH:mm"),K=()=>{w.value="",C.push("/notes"),g()},P=t=>{if(!t)return"";const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""};return(t,e)=>{const k=d("el-tag"),x=d("el-button"),j=d("el-input"),R=d("el-empty"),z=d("el-icon"),b=d("el-dropdown-item"),q=d("el-dropdown-menu"),W=d("el-dropdown"),X=d("el-card"),Z=d("el-pagination"),G=ae("loading");return n(),u("div",me,[i("div",fe,[i("div",null,[e[4]||(e[4]=i("h2",null,"我的笔记",-1)),w.value?(n(),u("div",ge,[e[3]||(e[3]=i("span",null,"筛选标签：",-1)),s(k,{closable:"",onClose:K,type:"primary"},{default:a(()=>[c(p(w.value),1)]),_:1})])):y("",!0)]),s(x,{type:"primary",icon:l(te),onClick:T,class:"hover-lift active-scale"},{default:a(()=>[...e[5]||(e[5]=[c(" 新建笔记 ",-1)])]),_:1},8,["icon"])]),i("div",ve,[s(j,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),placeholder:"搜索笔记标题或内容...","prefix-icon":l(B),clearable:"",class:"glass-input",onKeyup:oe(S,["enter"]),onClear:L},{append:a(()=>[s(x,{icon:l(B),onClick:S,class:"active-scale"},{default:a(()=>[...e[6]||(e[6]=[c("搜索",-1)])]),_:1},8,["icon"])]),_:1},8,["modelValue","prefix-icon"])]),ee((n(),u("div",ye,[!l(r).hasNotes&&!l(r).loading?(n(),h(R,{key:0,description:"还没有笔记，快去创建一个吧！"},{default:a(()=>[s(x,{type:"primary",onClick:T,class:"bounce-in"},{default:a(()=>[...e[7]||(e[7]=[c("创建笔记",-1)])]),_:1})]),_:1})):(n(),u("div",he,[(n(!0),u(I,null,M(l(r).noteList,(o,J)=>(n(),h(X,{key:o.noteId,class:re(["note-card glass-card hover-lift active-scale",`fade-in-up-delay-${Math.min(J%6+1,3)}`]),shadow:"hover",onClick:v=>H(o.noteId)},{default:a(()=>[i("div",Ce,[i("h3",ke,p(o.title),1),s(W,{onCommand:v=>U(v,o)},{dropdown:a(()=>[s(q,null,{default:a(()=>[s(b,{command:"edit"},{default:a(()=>[s(z,null,{default:a(()=>[s(l(le))]),_:1}),e[8]||(e[8]=c(" 编辑 ",-1))]),_:1}),s(b,{command:"delete",divided:""},{default:a(()=>[s(z,null,{default:a(()=>[s(l(ie))]),_:1}),e[9]||(e[9]=c(" 删除 ",-1))]),_:1})]),_:1})]),default:a(()=>[s(z,{class:"more-icon"},{default:a(()=>[s(l(ne))]),_:1})]),_:1},8,["onCommand"])]),i("div",Ne,p(P(o.content)||"暂无内容"),1),i("div",we,[i("div",xe,[o.categoryId?(n(),h(k,{key:0,size:"small",type:"info"},{default:a(()=>[c(p(E(o.categoryId)),1)]),_:2},1024)):y("",!0),o.tags?(n(),u("div",ze,[(n(!0),u(I,null,M(o.tags.split(",").slice(0,3),v=>(n(),h(k,{key:v,size:"small",effect:"plain",class:"tag-item"},{default:a(()=>[c(p(v.trim()),1)]),_:2},1024))),128)),o.tags.split(",").length>3?(n(),h(k,{key:0,size:"small",type:"info"},{default:a(()=>[c(" +"+p(o.tags.split(",").length-3),1)]),_:2},1024)):y("",!0)])):y("",!0)]),i("span",Se,p(F(o.updatedAt)),1)])]),_:2},1032,["class","onClick"]))),128))]))])),[[G,l(r).loading]]),l(r).hasNotes?(n(),u("div",Te,[s(Z,{"current-page":m.value,"onUpdate:currentPage":e[1]||(e[1]=o=>m.value=o),"page-size":f.value,"onUpdate:pageSize":e[2]||(e[2]=o=>f.value=o),total:l(r).total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:$,onCurrentChange:Y},null,8,["current-page","page-size","total"])])):y("",!0)])}}},He=ue(be,[["__scopeId","data-v-bd46a85f"]]);export{He as default};
