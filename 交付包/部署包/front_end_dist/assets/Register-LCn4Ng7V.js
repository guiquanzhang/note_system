import{y as g,z as C,c as R,o as k,a as l,b as r,w as t,r as n,u as h,f as m,i as U,B,m as _,A as N,d as w,t as q}from"./index-CxuP8R5R.js";import{_ as E}from"./logo-Ft4BtHHg.js";import"./index-DbT8dq-d.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as S}from"./user-DY1xn_IR.js";import"./request-CqNpOxbT.js";const T={class:"register-container"},z={class:"register-card"},D={class:"register-footer"},K={__name:"Register",setup(L){const f=h(),v=S(),p=g(null),u=g(!1),o=C({username:"",email:"",password:"",confirmPassword:""}),x={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,validator:(d,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==o.password?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]},c=async()=>{if(p.value)try{await p.value.validate(),u.value=!0;const{confirmPassword:d,...e}=o;await v.register(e),setTimeout(()=>{f.push("/login")},1500)}catch(d){console.error("注册失败:",d)}finally{u.value=!1}},y=()=>{f.push("/login")};return(d,e)=>{const s=n("el-input"),i=n("el-form-item"),V=n("el-button"),b=n("el-form"),P=n("el-link");return k(),R("div",T,[l("div",z,[e[6]||(e[6]=l("div",{class:"register-header"},[l("img",{src:E,alt:"CloudNote Logo",class:"header-logo"}),l("h2",null,"创建账号"),l("p",null,"开始您的云笔记之旅")],-1)),r(b,{ref_key:"registerFormRef",ref:p,model:o,rules:x,class:"register-form",size:"large"},{default:t(()=>[r(i,{prop:"username"},{default:t(()=>[r(s,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),placeholder:"请输入用户名","prefix-icon":m(U),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"email"},{default:t(()=>[r(s,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=a=>o.email=a),placeholder:"请输入邮箱（可选）","prefix-icon":m(B),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"password"},{default:t(()=>[r(s,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=a=>o.password=a),type:"password",placeholder:"请输入密码","prefix-icon":m(_),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"confirmPassword"},{default:t(()=>[r(s,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>o.confirmPassword=a),type:"password",placeholder:"请确认密码","prefix-icon":m(_),"show-password":"",onKeyup:N(c,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,null,{default:t(()=>[r(V,{type:"primary",loading:u.value,class:"register-button",onClick:c},{default:t(()=>[w(q(u.value?"注册中...":"注册"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",D,[e[5]||(e[5]=l("span",null,"已有账号？",-1)),r(P,{type:"primary",onClick:y},{default:t(()=>[...e[4]||(e[4]=[w("立即登录",-1)])]),_:1})])])])}}},O=F(K,[["__scopeId","data-v-ebecf7f4"]]);export{O as default};
