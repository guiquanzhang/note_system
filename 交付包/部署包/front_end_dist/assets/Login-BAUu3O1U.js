import{y as f,z as k,c as h,o as C,a as r,b as o,w as l,r as t,u as R,f as g,i as L,A as N,m as B,d as _,t as F}from"./index-CxuP8R5R.js";import{_ as S}from"./logo-Ft4BtHHg.js";import"./index-DbT8dq-d.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as q}from"./user-DY1xn_IR.js";import"./request-CqNpOxbT.js";const z={class:"login-container"},K={class:"login-card"},T={class:"login-footer"},A={__name:"Login",setup(D){const m=R(),v=q(),n=f(null),a=f(!1),s=k({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}]},d=async()=>{if(n.value)try{await n.value.validate(),a.value=!0,await v.login(s),m.push("/notes")}catch(p){console.error("登录失败:",p)}finally{a.value=!1}},y=()=>{m.push("/register")};return(p,e)=>{const c=t("el-input"),i=t("el-form-item"),x=t("el-button"),b=t("el-form"),V=t("el-link");return C(),h("div",z,[r("div",K,[e[4]||(e[4]=r("div",{class:"login-header"},[r("img",{src:S,alt:"CloudNote Logo",class:"header-logo"}),r("h2",null,"欢迎回来"),r("p",null,"登录您的云笔记账号")],-1)),o(b,{ref_key:"loginFormRef",ref:n,model:s,rules:w,class:"login-form",size:"large"},{default:l(()=>[o(i,{prop:"username"},{default:l(()=>[o(c,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"请输入用户名","prefix-icon":g(L),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,{prop:"password"},{default:l(()=>[o(c,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"请输入密码","prefix-icon":g(B),"show-password":"",onKeyup:N(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,null,{default:l(()=>[o(x,{type:"primary",loading:a.value,class:"login-button",onClick:d},{default:l(()=>[_(F(a.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),r("div",T,[e[3]||(e[3]=r("span",null,"还没有账号？",-1)),o(V,{type:"primary",onClick:y},{default:l(()=>[...e[2]||(e[2]=[_("立即注册",-1)])]),_:1})])])])}}},M=U(A,[["__scopeId","data-v-93f0b947"]]);export{M as default};
