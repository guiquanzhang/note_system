import{M as V,y as D,L as b,N as E,K as z,u as A,c as r,o,X as F,Z as R,Y as f,a,b as s,w as n,f as i,a7 as $,r as v,h as w,T as j,t as d,k as x,d as l,F as q,e as K,a0 as W,a8 as X,W as Z}from"./index-CxuP8R5R.js";import"./index-DbT8dq-d.js";import{p as G}from"./content-CGjCXP7K.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as O}from"./note-ChPUqnyG.js";import{u as P}from"./category-CzVHQ6Cc.js";import"./request-CqNpOxbT.js";import"./note-CSOVseSf.js";const Q={class:"note-detail-page"},U={class:"detail-container"},ee={key:0,class:"note-content-wrapper"},te={class:"page-header"},oe={class:"header-actions"},ae={class:"note-title"},se={class:"note-meta"},ne={class:"meta-item"},le={class:"meta-item"},ce={key:0,class:"note-tags"},re=["innerHTML"],ie={__name:"Detail",setup(de){const g=A(),B=V(),y=O(),M=P(),u=B.params.id,_=D(!1),e=D(null),T=b(()=>{if(!e.value)return"";console.log("原始内容:",e.value.content);const t=G(e.value.content);return console.log("处理后内容:",t),t});E(async()=>{await S()});const S=async()=>{try{_.value=!0,e.value=await y.fetchNoteDetail(u)}catch{z.error("加载笔记失败"),m()}finally{_.value=!1}},Y=()=>{g.push(`/notes/${u}/edit`)},H=()=>{Z.confirm(`确定要删除笔记"${e.value.title}"吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await y.deleteNote(u),m()}).catch(()=>{})},m=()=>{g.push("/notes")},I=t=>M.getCategoryName(t),h=t=>W(t).format("YYYY-MM-DD HH:mm:ss");return(t,c)=>{const p=v("el-button"),k=v("el-tag"),N=v("el-icon"),L=R("loading");return o(),r("div",Q,[F((o(),r("div",U,[e.value?(o(),r("div",ee,[a("div",te,[s(p,{icon:i($),onClick:m},{default:n(()=>[...c[0]||(c[0]=[l("返回",-1)])]),_:1},8,["icon"]),a("div",oe,[s(p,{icon:i(w),onClick:Y},{default:n(()=>[...c[1]||(c[1]=[l("编辑",-1)])]),_:1},8,["icon"]),s(p,{icon:i(j),type:"danger",onClick:H},{default:n(()=>[...c[2]||(c[2]=[l("删除",-1)])]),_:1},8,["icon"])])]),a("h1",ae,d(e.value.title),1),a("div",se,[e.value.categoryId?(o(),x(k,{key:0,size:"small",type:"info"},{default:n(()=>[l(d(I(e.value.categoryId)),1)]),_:1})):f("",!0),a("span",ne,[s(N,null,{default:n(()=>[s(i(X))]),_:1}),l(" 创建于 "+d(h(e.value.createdAt)),1)]),a("span",le,[s(N,null,{default:n(()=>[s(i(w))]),_:1}),l(" 更新于 "+d(h(e.value.updatedAt)),1)])]),e.value.tags?(o(),r("div",ce,[(o(!0),r(q,null,K(e.value.tags.split(","),C=>(o(),x(k,{key:C,size:"small",effect:"plain"},{default:n(()=>[l(d(C.trim()),1)]),_:2},1024))),128))])):f("",!0),a("div",{class:"note-content ql-editor",innerHTML:T.value},null,8,re)])):f("",!0)])),[[L,_.value]])])}}},he=J(ie,[["__scopeId","data-v-e5762675"]]);export{he as default};
