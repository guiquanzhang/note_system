import{a9 as c,K as r}from"./index-CxuP8R5R.js";import{r as o}from"./request-CqNpOxbT.js";function g(t){return o({url:"/category",method:"post",data:t})}function i(t,e){return o({url:`/category/${t}`,method:"put",data:e})}function y(t){return o({url:`/category/${t}`,method:"delete"})}function n(){return o({url:"/category/list",method:"get"})}const d=c("category",{state:()=>({categoryList:[],loading:!1}),getters:{hasCategories:t=>t.categoryList.length>0,categoryCount:t=>t.categoryList.length,getCategoryById:t=>e=>t.categoryList.find(a=>a.categoryId===e),getCategoryName:t=>e=>{const a=t.categoryList.find(s=>s.categoryId===e);return a?a.name:"未分类"}},actions:{async fetchCategoryList(){try{this.loading=!0;const t=await n();return this.categoryList=t||[],t}catch(t){throw r.error("获取分类列表失败"),t}finally{this.loading=!1}},async createCategory(t){try{return await g(t),r.success("创建分类成功"),await this.fetchCategoryList(),!0}catch(e){throw r.error("创建分类失败"),e}},async updateCategory(t,e){try{return await i(t,e),r.success("更新分类成功"),await this.fetchCategoryList(),!0}catch(a){throw r.error("更新分类失败"),a}},async deleteCategory(t){try{return await y(t),r.success("删除分类成功"),await this.fetchCategoryList(),!0}catch(e){throw r.error("删除分类失败"),e}},reset(){this.categoryList=[],this.loading=!1}}});export{i as a,g as c,y as d,n as g,d as u};
